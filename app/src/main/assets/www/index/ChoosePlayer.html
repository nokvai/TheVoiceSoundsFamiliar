<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--<script src='../js/jquery-3.2.1.js' type='text/javascript'></script>-->
    <!--<script src='../js/musicHelper.js' type='text/javascript'></script>-->
    <!--<script src='../js/clickSound.js' type='text/javascript'></script>-->
    <!--<link href="../css/CustomStyles.css" rel="stylesheet" type="text/css" >-->
    <script src='file:///android_asset/www/js/jquery-3.2.1.js' type='text/javascript'></script>
    <script src='file:///android_asset/www/js/musicHelper.js' type='text/javascript'></script>
    <script src='file:///android_asset/www/js/clickSound.js' type='text/javascript'></script>
    <link href="file:///android_asset/www/css/CustomStyles.css" rel="stylesheet" type="text/css" >

    <script>
        $(document).ready(function() {

            function showTheme() {
                $("body").css( {"background-image": "url(" + mygame.getChangeTheme(Number(1)) + ")"});
                $("body").addClass("bg");
             } showTheme();

            var tbl = $('#tablePlayer tbody');

			function setValue(id) {
				var queryString = "?id=" + id;
				window.location.href = "file:///android_asset/www/index/SelectLevel.html" + queryString;
			}

            $("#btnBack").click(function() {
                clickSound();
                setTimeout(function() {
                    window.location = "file:///android_asset/www/index/MainMenu.html";
                }, 400);
            });

			$("#btnNew").click(function() {
                clickSound();
                setTimeout(function() {
                    window.location = "file:///android_asset/www/index/NewPlayer.html";
                }, 400);
            });

			$("#btnNext").click(function() {
                clickSound();
                setTimeout(function() {
                   tbl.find("tr.selected").each(function(index, elem) {
						if($(this).length > 0) {
							var id = $("#tablePlayer tbody tr.selected").attr("id");
							setValue(id);
						}
					});
                }, 400);
            });


			function addRow() {
                tbl.empty();
				var players = mygame.getAllPlayer().split(',');
				for (var i=0;i< (players.length - 1);i++) {
                        var p = players[i].split('&');
                         var tr = $('<tr/>');
                         var td1 = $('<td/>');
                         tr.attr("id", p[0]);
                         td1.append(p[1]);
                         tr.append(td1);
                         tbl.append(tr);
                    }
			}

			addRow();

		    $('#tablePlayer tbody').on( 'click', 'tr', function () {
				if ( $(this).hasClass('selected') ) {
					$(this).removeClass('selected');
				} else {
					$(this).siblings().removeClass('selected');
					$(this).addClass('selected');
                    //var id = $("#tablePlayer tbody tr.selected td")[0].textContent;
                    //mygame.msg(id);
				}
			});


        });


    </script>

</head>

<body>
    <h2 id="title" style="text-align:center;">Choose Player</h2>
    <div class="center-div" style="text-align: center;">
		<table class="table-center" id="tablePlayer">
			<tbody style="height:160px; overflow-y:auto;">
			</tbody>
		</table>
    </div>
	<br>
	<div class="center-div" style="text-align:center;">
		<button id="btnBack" class="button-nav" style="width:150px;">Back</button>
		&nbsp;&nbsp;&nbsp;&nbsp;
		<button id="btnNew" class="button-nav" style="width:150px;">New</button>
		&nbsp;&nbsp;&nbsp;&nbsp;
		<button id="btnNext" class="button-nav" style="width:150px;">Select Level</button>
    </div>

</body>

</html>
